<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Class Record</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>Record</h1>
<div class='classBlock'>
<table class='classHead' summary='Record'>
   <tr><td><strong>Module</strong></td><td>ejs.db</td></tr>
   <tr><td><strong>Namespace</strong></td><td>"ejs.db"</td></tr>
   <tr><td><strong>Definition</strong></td><td> class Record</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>Record <img src='images/inherit.gif' alt='inherit'/> <a href='intrinsic-Object.html'>Object</a>       </td></tr>
</table>

<p class='classBrief'>Database record class.</p>

<p class='classDescription'>A record instance corresponds to a row in the database. This class provides a low level  Object Relational Mapping (ORM) between the database and Ejscript objects. This class provides methods to create, read, update and delete rows in the database. When read or initialized object properties are dynamically created  in the Record instance for each column in the database table. Users should subclass the Record class for each  database table to manage.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_afterFilters</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_assocName</td><td><a href='intrinsic-String.html'>String</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_beforeFilters</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_belongsTo</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_className</td><td><a href='intrinsic-String.html'>String</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_columns</td><td><a href='intrinsic-Object.html'>Object</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_db</td><td><a href='ejs.db-Database.html'>Database</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_foreignId</td><td><a href='intrinsic-String.html'>String</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_hasMany</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_hasOne</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_keyName</td><td><a href='intrinsic-String.html'>String</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_tableName</td><td><a href='intrinsic-String.html'>String</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_trace</td><td><a href='intrinsic-Boolean.html'>Boolean</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_validations</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int static </td><td>_wrapFilters</td><td><a href='intrinsic-Array.html'>Array</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>static </td><td>ErrorMessages</td><td>&nbsp;</td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int </td><td>_cacheAssoc</td><td><a href='intrinsic-Object.html'>Object</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int </td><td>_errors</td><td><a href='intrinsic-Object.html'>Object</a></td><td>&nbsp;</td></tr>
   <tr><td nowrap align='center'>ejs.db.int </td><td>_keyValue</td><td><a href='intrinsic-Object.html'>Object</a></td><td>&nbsp;</td></tr>
</table>

<hr />
<a name='Methods'></a>
<h2 class='classSection'>Record Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#afterFilter'><b>afterFilter</b></a>(fn, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Run filters after saving data.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#beforeFilter'><b>beforeFilter</b></a>(fn, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Run filters before saving data.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#belongsTo'><b>belongsTo</b></a>(owner, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define a belonging reference to another model class.</td></tr>
   <tr class='apiDef'><td class='apiType'>static get </td><td><a href='#columnNames'><b>columnNames</b></a>(): <a href='intrinsic-Array.html'>Array</a></tr>   <tr class='apiDef'><td class='apiType'>static get </td><td><a href='#columnTitles'><b>columnTitles</b></a>(): <a href='intrinsic-Array.html'>Array</a></tr>   <tr class='apiDef'><td class='apiType'></td><td><a href='#constructor'><b>constructor</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr>   <tr class='apiDef'><td class='apiType'>static get </td><td><a href='#db'><b>db</b></a>()</tr>   <tr class='apiDef'><td class='apiType'></td><td><a href='#error'><b>error</b></a>(field: <a href='intrinsic-String.html'>String</a>, msg: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set an error message.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#find'><b>find</b></a>(key: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Object.html'>Object</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Find a record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#findAll'><b>findAll</b></a>(options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Find all the matching records.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#findOneWhere'><b>findOneWhere</b></a>(where: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Object.html'>Object</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Find the first record matching a condition.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#findWhere'><b>findWhere</b></a>(where: <a href='intrinsic-String.html'>String</a>, count: <a href='intrinsic-Number.html'>Number</a>): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Find records matching a condition.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getColumnNames'><b>getColumnNames</b></a>(): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Return the column names for the table.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getColumnTitles'><b>getColumnTitles</b></a>(): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Return the column names for the record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getColumnType'><b>getColumnType</b></a>(field: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-String.html'>String</a></tr>   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getDb'><b>getDb</b></a>(): <a href='ejs.db-Database.html'>Database</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get the database connection for this record class.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#getErrors'><b>getErrors</b></a>(): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get the errors for the record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getKeyName'><b>getKeyName</b></a>(): <a href='intrinsic-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get the key name for this record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getNumRows'><b>getNumRows</b></a>(): <a href='intrinsic-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Return the number of rows in the table.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#getTableName'><b>getTableName</b></a>(): <a href='intrinsic-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get the associated name for this record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#hasAndBelongsToMany'><b>hasAndBelongsToMany</b></a>(model: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define a containment relationship to another model class.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#hasError'><b>hasError</b></a>(field: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Check if the record has any errors.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#hasMany'><b>hasMany</b></a>(model: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define a containment relationship to another model class.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#hasOne'><b>hasOne</b></a>(model: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define a containment relationship to another model class.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#initialize'><b>initialize</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr>   <tr class='apiDef'><td class='apiType'>static get </td><td><a href='#keyName'><b>keyName</b></a>(): <a href='intrinsic-String.html'>String</a></tr>   <tr class='apiDef'><td class='apiType'>static get </td><td><a href='#numRows'><b>numRows</b></a>(): <a href='intrinsic-String.html'>String</a></tr>   <tr class='apiDef'><td class='apiType'> </td><td><a href='#Record'><b>Record</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Construct a new record instance.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#remove'><b>remove</b></a>(keys: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove records from the database.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#save'><b>save</b></a>(): <a href='intrinsic-Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Save the record to the database.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#saveUpdate'><b>saveUpdate</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Update a record based on the supplied fields and values.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#setDb'><b>setDb</b></a>(dbase: <a href='ejs.db-Database.html'>Database</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Set the database connection for this record class.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#setKeyName'><b>setKeyName</b></a>(name: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set the key name for this record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#setTableName'><b>setTableName</b></a>(name: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set the associated table name for this record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#sql'><b>sql</b></a>(cmd: <a href='intrinsic-String.html'>String</a>, count: <a href='intrinsic-Number.html'>Number</a>): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Run an SQL statement and return selected records.</td></tr>
   <tr class='apiDef'><td class='apiType'>static get </td><td><a href='#tableName'><b>tableName</b></a>(): <a href='intrinsic-String.html'>String</a></tr>   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#trace'><b>trace</b></a>(on: <a href='intrinsic-Boolean.html'>Boolean</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Trace SQL statements.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#validateFormat'><b>validateFormat</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)</tr>   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#validateNumber'><b>validateNumber</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)</tr>   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#validatePresence'><b>validatePresence</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)</tr>   <tr class='apiDef'><td class='apiType'></td><td><a href='#validateRecord'><b>validateRecord</b></a>(): <a href='intrinsic-Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Validate a record.</td></tr>
   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#validateUnique'><b>validateUnique</b></a>(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)</tr>   <tr class='apiDef'><td class='apiType'>static </td><td><a href='#wrapFilter'><b>wrapFilter</b></a>(fn, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Run filters before and after saving data.</td></tr>
</table>

<p class='inheritedLink'><a href='intrinsic-Object.html#Methods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='afterFilter'></a>
<div class='api'>
<div class='apiSig'>static  afterFilter(fn, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Run filters after saving data.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>fn </td><td>Function to run </td></tr><tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td>- reserved </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='beforeFilter'></a>
<div class='api'>
<div class='apiSig'>static  beforeFilter(fn, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Run filters before saving data.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>fn </td><td>Function to run </td></tr><tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td>- reserved </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='belongsTo'></a>
<div class='api'>
<div class='apiSig'>static  belongsTo(owner, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Define a belonging reference to another model class.</p>
<dl><dt>Description</dt><dd>When a model belongs to another, it has a foreign key reference to another class.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>owner </td><td>Referenced model class that logically owns this model. </td></tr><tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td>Optional options hash </td></tr></table></dd>
</dl><h3 class='methodSection'>Options</h3>
<p class='detail'>
className: <a href='Name.html'>Name</a>  &mdash; of the class </p>
<p class='detail'>
foreignKey: <a href='Key.html'>Key</a>  &mdash; name for the foreign key </p>
<p class='detail'>
conditions: <a href='SQL.html'>SQL</a>  &mdash; conditions for the relationship to be satisfied </p>
</div>
</div>
<hr />
<a name='columnNames'></a>
<div class='api'>
<div class='apiSig'>static get  columnNames(): <a href='intrinsic-Array.html'>Array</a>
</div>
</div>
<hr />
<a name='columnTitles'></a>
<div class='api'>
<div class='apiSig'>static get  columnTitles(): <a href='intrinsic-Array.html'>Array</a>
</div>
</div>
<hr />
<a name='constructor'></a>
<div class='api'>
<div class='apiSig'> constructor(fields: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
</div>
<hr />
<a name='db'></a>
<div class='api'>
<div class='apiSig'>static get  db()
</div>
</div>
<hr />
<a name='error'></a>
<div class='api'>
<div class='apiSig'> error(field: <a href='intrinsic-String.html'>String</a>, msg: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Set an error message.</p>
<dl><dt>Description</dt><dd>This defines an error message for the given field in a record.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>field: <a href='intrinsic-String.html'>String</a> </td><td>Name of the field to associate with the error message </td></tr><tr><td class='param'>msg: <a href='intrinsic-String.html'>String</a> </td><td>Error message </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='find'></a>
<div class='api'>
<div class='apiSig'>static  find(key: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Object.html'>Object</a>
</div>
<div class='apiDetail'>
<p>Find a record.</p>
<dl><dt>Description</dt><dd>Find and return a record identified by its primary key if supplied or by the specified options.  If more than one record matches, return the first matching record.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>key: <a href='intrinsic-Object.html'>Object</a> </td><td>Key Optional key value. Set to null if selecting via the options  </td></tr><tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td>Optional search option values </td></tr></table></dd>
</dl><h3 class='methodSection'>Options</h3>
<p class='detail'>
columns: <a href='List.html'>List</a>  &mdash; of columns to retrieve </p>
<p class='detail'>
conditions: <a href='{.html'>{</a>  &mdash; field: value, ...}   or [ "SQL condition", "id == 23", ...] </p>
<p class='detail'>
from: <a href='Low.html'>Low</a>  &mdash; level from clause (not fully implemented) </p>
<p class='detail'>
keys: <a href='[set.html'>[set</a>  &mdash; of matching key values] </p>
<p class='detail'>
order: <a href='ORDER.html'>ORDER</a>  &mdash; BY clause </p>
<p class='detail'>
group: <a href='GROUP.html'>GROUP</a>  &mdash; BY clause </p>
<p class='detail'>
include: <a href='[Model,.html'>[Model,</a>  &mdash; ...] Models to join in the query and create associations for. Always preloads. </p>
<p class='detail'>
joins: <a href='Low.html'>Low</a>  &mdash; level join statement "LEFT JOIN vists on stockId = visits.id". Low level joins do not create association objects (or lazy loaders). The names of the joined columns are prefixed with the appropriate table name using camel case (tableColumn). </p>
<p class='detail'>
limit: <a href='LIMIT.html'>LIMIT</a>  &mdash; count </p>
<p class='detail'>
depth: <a href='Specify.html'>Specify</a>  &mdash; the depth for which to create associations for belongsTo, hasOne and hasMany relationships. Depth of 1 creates associations only in the immediate fields of the result. Depth == 2 creates in the  next level and so on. Defaults to one. </p>
<p class='detail'>
offset: <a href='OFFSET.html'>OFFSET</a>  &mdash; count </p>
<p class='detail'>
preload: <a href='[Model1,.html'>[Model1,</a>  &mdash; ...] Preload "belongsTo" model associations rather than creating lazy loaders. This can reduce the number of database queries if iterating through associations. </p>
<p class='detail'>
readonly: <a href='.html'></a>  &mdash; </p>
<p class='detail'>
lock: <a href='.html'></a>  &mdash; </p>
<dl><dt>Returns</dt>
<dd>A model record or null if the record cannot be found.</dd></dl>
<h3 class='methodSection'>Throws</h3>
<p class='detail'>
<a href='IOError.html'>IOError</a>: on internal SQL errors 
</p>
</div>
</div>
<hr />
<a name='findAll'></a>
<div class='api'>
<div class='apiSig'>static  findAll(options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Find all the matching records.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td>Optional set of options. See $find for list of possible options. </td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>An array of model records. The array may be empty if no matching records are found.</dd></dl>
<h3 class='methodSection'>Throws</h3>
<p class='detail'>
<a href='IOError.html'>IOError</a>: on internal SQL errors 
</p>
</div>
</div>
<hr />
<a name='findOneWhere'></a>
<div class='api'>
<div class='apiSig'>static  findOneWhere(where: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Object.html'>Object</a>
</div>
<div class='apiDetail'>
<p>Find the first record matching a condition.</p>
<dl><dt>Description</dt><dd>Select a record using a given SQL where clause.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>where: <a href='intrinsic-String.html'>String</a> </td><td>SQL WHERE clause to use when selecting rows. </td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A model record or null if the record cannot be found.</dd></dl>
<h3 class='methodSection'>Throws</h3>
<p class='detail'>
<a href='IOError.html'>IOError</a>: on internal SQL errors 
</p>
<dl><dt>Example</dt>
<dd><pre>rec = findOneWhere("cost < 200")
</pre></dd></dl>
</div>
</div>
<hr />
<a name='findWhere'></a>
<div class='api'>
<div class='apiSig'>static  findWhere(where: <a href='intrinsic-String.html'>String</a>, count: <a href='intrinsic-Number.html'>Number</a>): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Find records matching a condition.</p>
<dl><dt>Description</dt><dd>Select a set of records using a given SQL where clause.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
</td></tr><tr><td class='param'>count: <a href='intrinsic-Number.html'>Number</a> </td><td></td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>An array of objects. Each object represents a matching row with fields for each column.</dd></dl>
<dl><dt>Example</dt>
<dd><pre>list = findWhere("cost < 200")
</pre></dd></dl>
</div>
</div>
<hr />
<a name='getColumnNames'></a>
<div class='api'>
<div class='apiSig'>static  getColumnNames(): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Return the column names for the table.</p>
<dl><dt>Returns</dt>
<dd>An array containing the names of the database columns. This corresponds to the set of properties that will be created when a row is read using $find.</dd></dl>
</div>
</div>
<hr />
<a name='getColumnTitles'></a>
<div class='api'>
<div class='apiSig'>static  getColumnTitles(): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Return the column names for the record.</p>
<dl><dt>Returns</dt>
<dd>An array containing the Pascal case names of the database columns. The names have the first letter capitalized.</dd></dl>
</div>
</div>
<hr />
<a name='getColumnType'></a>
<div class='api'>
<div class='apiSig'>static  getColumnType(field: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-String.html'>String</a>
</div>
</div>
<hr />
<a name='getDb'></a>
<div class='api'>
<div class='apiSig'>static  getDb(): <a href='ejs.db-Database.html'>Database</a>
</div>
<div class='apiDetail'>
<p>Get the database connection for this record class.</p>
<dl><dt>Returns</dt>
<dd>Database instance object created via new $Database.</dd></dl>
</div>
</div>
<hr />
<a name='getErrors'></a>
<div class='api'>
<div class='apiSig'> getErrors(): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Get the errors for the record.</p>
<dl><dt>Returns</dt>
<dd>The error message collection for the record.</dd></dl>
</div>
</div>
<hr />
<a name='getKeyName'></a>
<div class='api'>
<div class='apiSig'>static  getKeyName(): <a href='intrinsic-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Get the key name for this record.</p>
</div>
</div>
<hr />
<a name='getNumRows'></a>
<div class='api'>
<div class='apiSig'>static  getNumRows(): <a href='intrinsic-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Return the number of rows in the table.</p>
</div>
</div>
<hr />
<a name='getTableName'></a>
<div class='api'>
<div class='apiSig'>static  getTableName(): <a href='intrinsic-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Get the associated name for this record.</p>
<dl><dt>Returns</dt>
<dd>The database table name backing this record class. Normally this is simply a plural class name.</dd></dl>
</div>
</div>
<hr />
<a name='hasAndBelongsToMany'></a>
<div class='api'>
<div class='apiSig'>static  hasAndBelongsToMany(model: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Define a containment relationship to another model class.</p>
<dl><dt>Description</dt><dd>When using "hasAndBelongsToMany" on another model, it  means that other models have a foreign key reference to this class and this class can "contain" many instances  of the other models.</dd></dl>
<h3 class='methodSection'>Options</h3>
<p class='detail'>
model: <a href='Model..html'>Model.</a>  &mdash; (TODO - not implemented). </p>
<p class='detail'>
foreignKey: <a href='Key.html'>Key</a>  &mdash; name for the foreign key. (TODO - not implemented). </p>
<p class='detail'>
through: <a href='String.html'>String</a>  &mdash; Class name which mediates the many to many relationship. (TODO - not implemented). </p>
<p class='detail'>
joinTable.: <a href='(TODO.html'>(TODO</a>  &mdash; - not implemented). </p>
</div>
</div>
<hr />
<a name='hasError'></a>
<div class='api'>
<div class='apiSig'> hasError(field: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<p>Check if the record has any errors.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>field: <a href='intrinsic-String.html'>String</a> </td><td></td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>True if the record has errors.</dd></dl>
</div>
</div>
<hr />
<a name='hasMany'></a>
<div class='api'>
<div class='apiSig'>static  hasMany(model: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Define a containment relationship to another model class.</p>
<dl><dt>Description</dt><dd>When using "hasMany" on another model, it means  that other model has a foreign key reference to this class and this class can "contain" many instances of  the other.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>model: <a href='intrinsic-Object.html'>Object</a> </td><td>Model class that is contained by this class.  </td></tr></table></dd>
</dl><h3 class='methodSection'>Options</h3>
<p class='detail'>
things: <a href='Model.html'>Model</a>  &mdash; object that is posessed by this. (TODO - not implemented) </p>
<p class='detail'>
through: <a href='String.html'>String</a>  &mdash; Class name which mediates the many to many relationship. (TODO - not implemented) </p>
<p class='detail'>
foreignKey: <a href='Key.html'>Key</a>  &mdash; name for the foreign key. (TODO - not implemented) </p>
</div>
</div>
<hr />
<a name='hasOne'></a>
<div class='api'>
<div class='apiSig'>static  hasOne(model: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Define a containment relationship to another model class.</p>
<dl><dt>Description</dt><dd>When using "hasOne" on another model,  it means that other model has a foreign key reference to this class and this class can "contain"  only one instance of the other.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>model: <a href='intrinsic-Object.html'>Object</a> </td><td>Model class that is contained by this class.  </td></tr><tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td></td></tr></table></dd>
</dl><h3 class='methodSection'>Options</h3>
<p class='detail'>
thing: <a href='Model.html'>Model</a>  &mdash; that is posessed by this. (TODO - not implemented). </p>
<p class='detail'>
foreignKey: <a href='Key.html'>Key</a>  &mdash; name for the foreign key (TODO - not implemented). </p>
<p class='detail'>
as: <a href='String.html'>String</a>  &mdash; (TODO - not implemented). </p>
</div>
</div>
<hr />
<a name='initialize'></a>
<div class='api'>
<div class='apiSig'> initialize(fields: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
</div>
<hr />
<a name='keyName'></a>
<div class='api'>
<div class='apiSig'>static get  keyName(): <a href='intrinsic-String.html'>String</a>
</div>
</div>
<hr />
<a name='numRows'></a>
<div class='api'>
<div class='apiSig'>static get  numRows(): <a href='intrinsic-String.html'>String</a>
</div>
</div>
<hr />
<a name='Record'></a>
<div class='api'>
<div class='apiSig'> Record(fields: <a href='intrinsic-Object.html'>Object</a>)
</div>
<div class='apiDetail'>
<p>Construct a new record instance.</p>
<dl><dt>Description</dt><dd>This is really a constructor function, because the Record class is  implemented by user models, no constructor will be invoked when a new user model is instantiated.  The record may be initialized by optionally supplying field data. However, the record will not be  written to the database until $save is called. To read data from the database into the record, use  one of the $find methods.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>fields: <a href='intrinsic-Object.html'>Object</a> </td><td>An optional object set of field names and values may be supplied to initialize the record. </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='remove'></a>
<div class='api'>
<div class='apiSig'>static  remove(keys: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Remove records from the database.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>keys: <a href='intrinsic-Array.html'>Array</a> </td><td>Set of keys identifying the records to remove </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='save'></a>
<div class='api'>
<div class='apiSig'> save(): <a href='intrinsic-Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<p>Save the record to the database.</p>
<dl><dt>Returns</dt>
<dd>True if the record is validated and successfully written to the database.</dd></dl>
<h3 class='methodSection'>Throws</h3>
<p class='detail'>
<a href='IOError.html'>IOError</a>: Throws exception on sql errors 
</p>
</div>
</div>
<hr />
<a name='saveUpdate'></a>
<div class='api'>
<div class='apiSig'> saveUpdate(fields: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<p>Update a record based on the supplied fields and values.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>fields: <a href='intrinsic-Object.html'>Object</a> </td><td>Hash of field/value pairs to use for the record update. </td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>True if the database is successfully updated. Returns false if validation fails. In this case, the record is not saved.</dd></dl>
<h3 class='methodSection'>Throws</h3>
<p class='detail'>
<a href='IOError.html'>IOError</a>: on database SQL errors 
</p>
</div>
</div>
<hr />
<a name='setDb'></a>
<div class='api'>
<div class='apiSig'>static  setDb(dbase: <a href='ejs.db-Database.html'>Database</a>)
</div>
<div class='apiDetail'>
<p>Set the database connection for this record class.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setKeyName'></a>
<div class='api'>
<div class='apiSig'>static  setKeyName(name: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Set the key name for this record.</p>
</div>
</div>
<hr />
<a name='setTableName'></a>
<div class='api'>
<div class='apiSig'>static  setTableName(name: <a href='intrinsic-String.html'>String</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Set the associated table name for this record.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>name: <a href='intrinsic-String.html'>String</a> </td><td>Name of the database table to backup the record class. </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='sql'></a>
<div class='api'>
<div class='apiSig'>static  sql(cmd: <a href='intrinsic-String.html'>String</a>, count: <a href='intrinsic-Number.html'>Number</a>): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Run an SQL statement and return selected records.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
</td></tr><tr><td class='param'>count: <a href='intrinsic-Number.html'>Number</a> </td><td></td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>An array of objects. Each object represents a matching row with fields for each column.</dd></dl>
</div>
</div>
<hr />
<a name='tableName'></a>
<div class='api'>
<div class='apiSig'>static get  tableName(): <a href='intrinsic-String.html'>String</a>
</div>
</div>
<hr />
<a name='trace'></a>
<div class='api'>
<div class='apiSig'>static  trace(on: <a href='intrinsic-Boolean.html'>Boolean</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Trace SQL statements.</p>
<dl><dt>Description</dt><dd>Control whether trace is enabled for the actual SQL statements issued against the database.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>on: <a href='intrinsic-Boolean.html'>Boolean</a> </td><td>If true, display each SQL statement to the log </td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='validateFormat'></a>
<div class='api'>
<div class='apiSig'>static  validateFormat(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)
</div>
</div>
<hr />
<a name='validateNumber'></a>
<div class='api'>
<div class='apiSig'>static  validateNumber(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)
</div>
</div>
<hr />
<a name='validatePresence'></a>
<div class='api'>
<div class='apiSig'>static  validatePresence(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)
</div>
</div>
<hr />
<a name='validateRecord'></a>
<div class='api'>
<div class='apiSig'> validateRecord(): <a href='intrinsic-Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<p>Validate a record.</p>
<dl><dt>Description</dt><dd>This call validates all the fields in a record.</dd></dl>
<dl><dt>Returns</dt>
<dd>True if the record has no errors.</dd></dl>
</div>
</div>
<hr />
<a name='validateUnique'></a>
<div class='api'>
<div class='apiSig'>static  validateUnique(fields: <a href='intrinsic-Object.html'>Object</a>, options: <a href='intrinsic-Object.html'>Object</a>)
</div>
</div>
<hr />
<a name='wrapFilter'></a>
<div class='api'>
<div class='apiSig'>static  wrapFilter(fn, options: <a href='intrinsic-Object.html'>Object</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Run filters before and after saving data.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr><td class='param'>fn </td><td>Function to run </td></tr><tr><td class='param'>options: <a href='intrinsic-Object.html'>Object</a> </td><td>- reserved </td></tr></table></dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://www.embedthis.com/">       Embedthis Software LLC, 2003-2009. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
